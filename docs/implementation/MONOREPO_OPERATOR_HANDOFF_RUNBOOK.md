# Monorepo Operator Handoff Runbook

Updated: 2026-02-08
Owner: AssistSupport Operations

## Purpose

Provide one operator runbook for normal operations, baseline promotion, and incident rollback in the consolidated monorepo.

## Normal Operations

1. Run baseline health checks:

```bash
pnpm run check:memorykernel-pin
pnpm run check:memorykernel-governance
pnpm run check:memorykernel-handoff
pnpm run test:memorykernel-contract
```

2. If all checks pass, continue normal development.
3. If any check fails, stop baseline promotion and follow incident rollback section.

## Baseline Promotion Workflow

1. Update in one PR only:
   - `config/memorykernel-integration-pin.json`
   - `config/memorykernel-producer-manifest.json`
   - `docs/MEMORYKERNEL_COMPATIBILITY_MATRIX.md`
2. Run full suite:

```bash
pnpm run typecheck
pnpm run test
pnpm run test:memorykernel-governance-negative
pnpm run test:memorykernel-contract
pnpm run test:ci
```

3. Run embedded producer suite:

```bash
cd services/memorykernel
cargo fmt --all -- --check
cargo clippy --workspace --all-targets --all-features -- -D warnings
cargo test --workspace --all-targets --all-features
./scripts/verify_producer_contract_manifest.sh --memorykernel-root "$(pwd)"
./scripts/verify_producer_handoff_payload.sh --memorykernel-root "$(pwd)"
```

4. Record results in evidence packet.

## Incident Rollback Workflow

Trigger conditions:

- Contract drift detected in CI.
- Runtime preflight fails unexpectedly after baseline update.
- Deterministic fallback regression detected.

Actions:

1. Revert to last-known-good pin/matrix/manifest trio.
2. Re-run consumer and producer verification suites.
3. Publish incident note with root cause and recovery status.
4. Keep runtime cutover posture `NO-GO` until joint approval.

## Communication Template

- Impact summary
- Current runtime posture (`GO`/`NO-GO`)
- Baseline currently active (tag/sha/service/api)
- Rollback action status
- Next validation milestone

## Security and Compliance Guardrails

- Do not include secrets or customer data in evidence logs.
- Keep compliance artifacts generated by existing approved scripts.
- Preserve adapter boundary and non-blocking enrichment policy.
